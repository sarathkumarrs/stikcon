!function(window,document){function setValue(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){}}function getValue(t){var e="";try{e=localStorage.getItem(t)}catch(t){}return e}function setup(){var version=1,location=window.location,isMobile=window.matchMedia("(max-device-width: 700px)").matches,deviceId=getValue(window.iticks.clientId+".iticksId");function createDiv(t){var e=document.createElement("div");if(t)for(var i in t)e.style[i]=t[i];return document.body.appendChild(e),e}function createImageModal(){var t=createDiv({}),e=document.createElement("div");e.className="iticks-modal",e.style.display="none";var i=document.createElement("span");i.className="iticks-modal-close",i.innerHTML="&times;",i.setAttribute("title","Close"),e.appendChild(i);var n=document.createElement("img");n.className="iticks-modal-img iticks-modal-content",e.appendChild(n),i.onclick=function(){e.style.display="none"},t.appendChild(e)}var styleElem=document.head.appendChild(document.createElement("style"));styleElem.innerHTML='.iticks-pop-button{position:fixed;z-index:2147483646;border:0;box-shadow: 0 0px 20px 0 rgba(0, 0, 0, .25);;transition:all .4s, bottom .8s ease-in-out;cursor:pointer;animation-duration:.2s;width:64px;height:64px;border-radius:32px;top:auto !important;}.iticks-badge-container{background: #ea4141;position: absolute;top: -3px;height: 17px;width: 17px;border-radius: 100px;box-shadow: 0 1px 5px 0 rgba(0, 0, 0, .5);}.iticks-badge-num{font-size:11px;line-height:17px;color:#fff;text-align: center;font-weight: bold;font-family: sans-serif;}.agent-img{width:64px !important;height:64px !important;margin:0px !important;border-radius:50%;}.iticks-close-btn{visibility:hidden;text-align:right;}.iticks-close-btn span{cursor:pointer;padding: 0px 5px;display:inline-block;}.iticks-close-btn .close-icon{width: 16px;height: 16px;fill: #666666;}.iticks-notif-msg:hover .iticks-close-btn{visibility:visible;}.iticks-notif-msg {position: fixed;max-width: 250px;z-index:2147483646;transition:all .4s, bottom .8s ease-in-out;animation-duration:.2s;}.iticks-last-msg{position: relative;background-color: #fff;border-radius: 5px;box-shadow: 1px 2px 9px 0px rgba(0,0,0,.4);cursor: pointer;white-space: pre-wrap;max-width: 250px;padding: 10px 15px;}.iticks-last-msg::after {z-index: 0;content: "";position: absolute;width: 8px;height: 8px;background: #fff;transform: rotate(45deg);bottom: 15px;}.notif-msg > div {max-height: 51px;line-height: 17px;overflow: hidden;word-break: break-all;}.notif-msg > div::before {content: "...";position: absolute;right: 6px;bottom: 9px;}.notif-msg > div::after {content:"";position: absolute;right: 4px;width: 1em;height: 1em;margin-top: 0.2em;background: #FFF;}.iticks-last-container{z-index:2147483646;color:#000;}.iticks-last-container p{margin:0;}.iticks-badge-container{display:none;}.iticks-frame-container{height:100%;transition: all .4s,bottom .8s ease-in-out !important;top:auto !important;}.iticks-hidden{top:auto !important;bottom:-100% !important}@media only screen and (max-device-width:700px) {body.iticks-open{overflow:auto;width:100%;height:100%;position:fixed !important;}.iticks-close-btn{visibility:visible;}.iticks-frame-container{width:100% !important;height:100% !important;max-height:unset !important;right:0 !important;left: 0 !important}}.iticks-modal-img{ border-radius: 5px; cursor: pointer; transition: .3s }.iticks-modal{ display: none; position: fixed; z-index: 2147483648; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color:#000; background-color: rgba(0, 0, 0, .9);justify-content: center;align-items: center; }.iticks-modal-content{ margin: auto; display: block; width: auto; max-height: 80%;}.iticks-modal-img{-webkit-animation-name: zoom;-webkit-animation-duration: .6s; animation-name: zoom; animation-duration: .6s; cursor: pointer; }@-webkit-keyframes zoom{ from{-webkit-transform: scale(0) } to{-webkit-transform: scale(1) } }@keyframes zoom{ from{ transform: scale(0) } to{ transform: scale(1) } }.iticks-modal-close{ position: absolute; top: 15px; right: 35px; color:#f1f1f1; font-size: 40px; font-weight: 700; transition: .3s; cursor: pointer; }.iticks-modal-close: focus,.iticks-modal-close: hover{ color:#bbb; text-decoration: none; cursor: pointer } @media only screen and(max-width: 700px){.iticks-modal-content{ width: 100%} } ';var buttonDiv=createDiv({});buttonDiv.innerHTML='<div class="iticks-pop-button"><img alt="chat-icon" class="chat-icon" style="width:32px;height:32px;margin:16px;" src="data:,"/><div class="iticks-badge-container"><div class="iticks-badge-num">0</div></div></div><div class="iticks-last-container"><div class="iticks-notif-msg iticks-hidden"><div class="iticks-close-btn"><span><svg class="close-icon" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path></svg></span></div><div class="iticks-last-msg"></div></div></div>',createImageModal();var containerDiv=createDiv({position:"fixed",display:"block",background:"transparent","z-index":"2147483646","box-shadow":"0 0 15px 0 rgba(0, 0, 0, .15)"});containerDiv.className="iticks-frame-container",containerDiv.innerHTML='<iframe title="chatbot" allow="microphone *" src="'+window.iticks.host+"/widgets/engage/"+window.iticks.clientId+"?ref="+encodeURIComponent(document.referrer)+"&landing="+encodeURIComponent(window.location.href)+"&v=1&cudId="+encodeURIComponent(deviceId)+'" style="border:0;width:100%;height:100%;" allowfullscreen>Loading...</iframe>';var chatFrame=containerDiv.querySelector("iframe"),lastMsgContainer=buttonDiv.querySelector(".iticks-last-container"),lastMsg=lastMsgContainer.querySelector(".iticks-notif-msg"),badgeContainer=buttonDiv.querySelector(".iticks-badge-container"),unreadCounter=buttonDiv.querySelector(".iticks-badge-num"),unreadMessage=buttonDiv.querySelector(".iticks-last-msg"),popbutton=buttonDiv.querySelector(".iticks-pop-button"),chatIcon=buttonDiv.querySelector(".chat-icon"),closeBtn=buttonDiv.querySelector(".iticks-close-btn>span"),lastState=null;function togglePageScroll(t){if(t)document.body.style.setProperty("top","-"+(window.scrollY||window.pageYOffset)+"px","important"),document.body.classList.add("iticks-open");else{document.body.classList.remove("iticks-open");var e=document.body.style.top;document.body.style.top="",window.scrollBy(0,-1*parseInt(e||"0"))}}function canLog(){return!!company&&-1!=["4wbQLsLgX95Kg6amw_c","pSZJr5kbAY7jEwEtf_c"].indexOf(company._id)}function maximizeChat(){"maximize.chatwidget"!=lastState&&"hide.chatwidget"!=lastState&&(lastState="maximize.chatwidget",popbutton.classList.add("iticks-hidden"),lastMsg.classList.add("iticks-hidden"),containerDiv.classList.remove("iticks-hidden"),chatFrame.contentWindow.postMessage({type:"visibility",data:"WIDGET_MAXIMIZED"},"*"),isMobile&&togglePageScroll(!0))}function minimizeChat(){"minimize.chat"!=lastState&&"hide.chatwidget"!=lastState&&(lastState="minimize.chat",containerDiv.classList.add("iticks-hidden"),popbutton.classList.remove("iticks-hidden"),lastMsg.classList.add("iticks-hidden"),chatFrame.contentWindow.postMessage({type:"visibility",data:"WIDGET_MINIMIZED"},"*"),isMobile&&togglePageScroll(!1))}function showWidget(){"hide.chatwidget"==lastState&&(lastState="show.chatwidget",isWidgetEnabled=!0,containerDiv.classList.add("iticks-hidden"),popbutton.classList.remove("iticks-hidden"),lastMsg.classList.add("iticks-hidden"),chatFrame.contentWindow.postMessage({type:"visibility",data:"WIDGET_MINIMIZED"},"*"),isMobile&&togglePageScroll(!1))}function hideWidget(){"hide.chatwidget"!=lastState&&(isWidgetEnabled=!(lastState="hide.chatwidget"),containerDiv.classList.add("iticks-hidden"),popbutton.classList.add("iticks-hidden"),lastMsg.classList.add("iticks-hidden"),chatFrame.contentWindow.postMessage({type:"visibility",data:"WIDGET_HIDDEN"},"*"),isMobile&&togglePageScroll(!1))}function createOrModifywidgetAppearance(){if(company&&company.livechat_settings){var t=company.livechat_settings,e=20,i=20,n="#006ba7",a="",o="",s=12,d=400,c="#000",r=300,l=350,m=10,p=0,g="right";if(t&&(void 0!==t.widget_margin_x&&(e=t.widget_margin_x),void 0!==t.widget_margin_y&&(i=t.widget_margin_y),o=t.notif_line_height,n=t.color||n,a=t.notif_font_family,s=t.notif_font_size||s,d=t.notif_font_weight||d,c=t.notif_font_color||c,r=t.widget_width||r,l=t.widget_height||l,void 0!==t.widget_x&&(m=t.widget_x),p=t.widget_y||p,t.enable_chat_icon_img&&t.chat_icon_img&&chatIcon?(chatIcon.classList.add("agent-img"),chatIcon.src=window.iticks.cdn+"/assets/"+t.chat_icon_img,popbutton&&(popbutton.style.background="transparent")):t.enable_chat_icon_img||(t.color&&popbutton&&(popbutton.style.background=t.color),chatIcon.classList.remove("agent-img"),chatIcon.src=window.iticks.cdn+"/assets/chat_icon.png"),t.widget_position)){var u=t.widget_position.split("_");-1<["left","right"].indexOf(u[1])&&(g=u[1])}var h=document.getElementById("iticks-style__"+company._id);h||(h=document.head.appendChild(document.createElement("style"))).setAttribute("id","iticks-style__"+company._id),h.innerHTML=".iticks-pop-button{bottom:"+i+"px;"+g+":"+e+"px;background:"+n+";}.iticks-badge-container{"+g+": -3px;}.iticks-notif-msg{"+g+":"+(69+e)+"px;bottom:"+i+"px;"+(a?"font-family: "+a+";":"")+(o?"line-height:"+o+"px;":"")+"font-size:"+s+"px;font-weight:"+d+";color:"+c+";}.iticks-last-msg::after{"+g+":-4px}.iticks-frame-container{width:"+r+"px;max-height:"+l+"px;"+g+":"+m+"px;bottom:"+p+"px}@media only screen and (max-device-width: 700px) {.iticks-frame-container {bottom: 0px;left: 0px}}"}}buttonDiv.addEventListener("click",(function(){maximizeChat()}));var closeTime=getValue("__iticks.closed"),isClosed=!1;closeTime&&Date.now()-parseInt(closeTime)<36e5&&(isClosed=!0),closeBtn.addEventListener("click",(function(t){lastMsg.classList.add("iticks-hidden"),t.stopPropagation(),setValue("__iticks.closed",Date.now()),isClosed=!0})),hideWidget();var isFrameReady=!1,isWidgetEnabled=!0;function getCookie(t){var e=("; "+document.cookie).split("; "+t+"=");if(2==e.length)return e.pop().split(";").shift()}var soundTimer=null,notifTimer=null,isTriggerSoundPlayed=!1,company=null;function sendCRMIds(t){if(!(3<t)){var e=getCookie("hubspotutk"),i=!1;if(e&&(chatFrame.contentWindow.postMessage({type:"sethubtk",data:e},"*"),i=!0),window.MXCProspectId&&(chatFrame.contentWindow.postMessage({type:"setls",data:window.MXCProspectId},"*"),i=!0),company&&company.company_settings&&company.company_settings.crm_integration&&-1<company.company_settings.crm_integration.indexOf("GA")){var n=getCookie("_ga");if(n){var a=n.split(".");chatFrame.contentWindow.postMessage({type:"setga",data:a[2]+"."+a[3]},"*"),i=!0}}i||setTimeout((function(){sendCRMIds(t+1)}),2e3)}}function sendShopifyCustomer(){window.IticksShopify&&window.IticksShopify.customer&&chatFrame.contentWindow.postMessage({type:"setShopifyUser",data:window.IticksShopify},"*")}function setActivityEvent(){try{window.dispatchEvent(new Event("_iticks.activity"))}catch(t){window.dispatchEvent(function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}("_iticks.activity",null))}}function receiveMessage(event){if(event.data&&event.data.type)if("set.iticksId"==event.data.type)setValue(event.data.key,event.data.value),onURLChange();else if("activity"==event.data.type)setActivityEvent();else if("theme.set"==event.data.type)popbutton.style.background=event.data.color;else if("minimize.chat"==event.data.type)minimizeChat();else if("maximize.chat"==event.data.type)maximizeChat();else if("show.chatwidget"==event.data.type)company=event.data.company,createOrModifywidgetAppearance(),showWidget();else if("hide.chatwidget"==event.data.type)hideWidget();else if("reset.closebtn"==event.data.type)isClosed=!1;else if("frame.ready"==event.data.type){if(isFrameReady)return;if(isFrameReady=!0,sendCRMIds(0),sendShopifyCustomer(),onNewEvent(),window.iticks.call=function(t,e){if("minimize"==t)minimizeChat();else if("maximize"==t)maximizeChat();else if("hide"==t)hideWidget();else if("show"==t)switch(showWidget(),e){case"minimize":minimizeChat();break;case"maximize":maximizeChat();break;default:minimizeChat()}else chatFrame.contentWindow.postMessage({type:"function",data:{type:t,data:e}},"*")},0<window.iticks.queue.length)for(;0<window.iticks.queue.length;){var item=window.iticks.queue.shift();window.iticks.call(item[0],item[1])}}else if("enable.widget"==event.data.type){if(isWidgetEnabled=!0,company=event.data.company,company&&company.company_settings&&company.company_settings.enable_payment){var h=document.head||document.documentElement,e=document.createElement("script");e.src="https://checkout.razorpay.com/v1/checkout.js",h.insertBefore(e,h.firstChild)}createOrModifywidgetAppearance()}else if("notif"==event.data.type){if(canLog()&&console.log("received notif",event.data,isClosed,soundTimer,lastState),notifTimer&&(clearTimeout(notifTimer),notifTimer=null),"maximize.chatwidget"==lastState||"hide.chatwidget"==lastState)return;var delay=0;event.data.isTriggerMsg&&(delay=1e3*(company.company_settings.engage_wait_time||0)),notifTimer=setTimeout((function(){if(0<event.data.count){if(badgeContainer.style.display="block",unreadCounter.innerText=event.data.count+"",isClosed)return;if(isMobile&&"Hide"==company.livechat_settings.mob_notif_msg)return;if(!isMobile&&"Hide"==company.livechat_settings.web_notif_msg)return;event.data.message?(lastMsgContainer.style.display="block",unreadMessage.innerHTML=event.data.message):lastMsgContainer.style.display="none",lastMsg.classList.remove("iticks-hidden"),soundTimer&&(clearTimeout(soundTimer),soundTimer=null),soundTimer=setTimeout((function(){var t=!1;if(event.data.isTriggerMsg){if(company.livechat_settings.enable_trigger_sound&&!isTriggerSoundPlayed)if("ONCE_PER_SESSION"==company.livechat_settings.trigger_sound_state){var e=getValue(window.iticks.clientId+".lastSoundPlayed");e?Date.now()-parseInt(e)>1e3*parseInt(company.company_settings.disengage_wait)&&(t=!0,setValue(window.iticks.clientId+".lastSoundPlayed",Date.now())):(t=!0,setValue(window.iticks.clientId+".lastSoundPlayed",Date.now()))}else t=!0}else event.data.isBotMsg?company.livechat_settings.enable_bot_msg_sound&&(t=!0):company.livechat_settings.enable_agent_msg_sound&&(t=!0);if(t){var i=new Audio(window.iticks.cdn+"/client/graceful.mp3").play();i&&i.then((function(){canLog()&&console.log("sound played"),event.data.isTriggerMsg&&(isTriggerSoundPlayed=!0)})).catch((function(t){canLog()&&console.log("sound not played",t)}))}}),100)}else lastMsg.classList.add("iticks-hidden"),badgeContainer.style.display="none"}),delay)}else if("initData"==event.data.type)chatFrame.contentWindow.postMessage({type:"setInitData",data:window.iticks.initData},"*"),chatFrame.contentWindow.postMessage({type:"version",version:version},"*");else if("config.paymentOptions"==event.data.type){var iticksFrame=document.getElementsByClassName("iticks-frame-container").item(0);iticksFrame.style.zIndex="999999999",event.data.options.handler=function(t){chatFrame.contentWindow.postMessage({type:"paymentAuthorized",data:t.razorpay_payment_id,msgId:event.data.msgId},"*"),iticksFrame.style.zIndex="2147483648"},event.data.options.modal={ondismiss:function(t){chatFrame.contentWindow.postMessage({type:"paymentDismiss",msgId:event.data.msgId},"*"),iticksFrame.style.zIndex="2147483648"}},window.rzp=new Razorpay(event.data.options)}else if("show.paymentForm"==event.data.type)window.rzp&&window.rzp.open(),chatFrame.contentWindow.postMessage({type:"paymentInitiate",msgId:event.data.msgId},"*");else if("hide.paymentForm"==event.data.type)window.rzp&&window.rzp.close();else if("set.chatIcon"==event.data.type)chatIcon.src=event.data.chatIcon,chatIcon.classList.add("agent-img"),popbutton.style.background="transparent";else if("execute.javaScript"==event.data.type){if(event.data.code)try{eval(event.data.code)}catch(t){console.log("Error: ",t)}}else"openImage"==event.data.type&&(document.querySelector(".iticks-modal-img").src=event.data.image_url,document.querySelector(".iticks-modal").style.display="flex")}var pendingEvents=[];function onNewEvent(){0<pendingEvents.length&&isFrameReady&&chatFrame.contentWindow.postMessage({type:"history",data:pendingEvents.splice(0)},"*")}function recordEvent(t){isWidgetEnabled&&(pendingEvents.push(t),onNewEvent())}recordEvent({type:"Click",url:location.href,time:Date.now()});var isVisible=(void 0!==document.hidden?(ga="hidden",ha="visibilitychange"):void 0!==document.msHidden?(ga="msHidden",ha="msvisibilitychange"):void 0!==document.webkitHidden&&(ga="webkitHidden",ha="webkitvisibilitychange"),void 0===document.addEventListener||void 0===document[ga]?console.log("IntelliTicks requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):(document.addEventListener(ha,ja,!1),window.addEventListener("hashchange",ja,!1)),document[ga]?(ia=!1,recordEvent({type:"Hide",url:location.href,time:Date.now()+1})):(ia=!0,recordEvent({type:"Show",url:location.href,time:Date.now()+1})),ma(),window.addEventListener("mousemove",ma,!1),window.addEventListener("mousedown",ma,!1),window.addEventListener("keypress",ma,!1),window.addEventListener("DOMMouseScroll",ma,!1),window.addEventListener("mousewheel",ma,!1),window.addEventListener("touchmove",ma,!1),window.addEventListener("MSPointerMove",ma,!1),window.addEventListener("_iticks.activity",ma,!1),function(){return ia}),ga,ha,ia,ka;function ja(){(ia=!document[ga])&&ma(),recordEvent({type:ia?"Show":"Hide",time:Date.now(),url:location.href})}function ma(){ia||recordEvent({type:"Show",url:location.href,time:Date.now()}),ia=!0,ka&&window.clearTimeout(ka),ka=window.setTimeout((function(){ia=!1,recordEvent({type:"Hide",url:location.href,time:Date.now()+1})}),3e4)}function onURLChange(){chatFrame.contentWindow.postMessage({type:"url.change",data:{url:window.location.href}},"*")}!function(t){function e(e){return function(a,o,s){var d=n[e].apply(t,arguments);onURLChange();var c=Date.now();return isVisible()||recordEvent({type:"Hide",url:i,time:c}),recordEvent({type:"Click",url:location.href,time:c+1}),isVisible()||recordEvent({type:"Show",url:location.href,time:c+2}),i=location.href,d}}var i=location.href,n={pushState:t.pushState,replaceState:t.replaceState,noop:function(){}};for(field in n)t[field]=e(field);window.addEventListener("popstate",n.noop)}(window.history),window.addEventListener("message",receiveMessage,!1)}"interactive"==document.readyState||"complete"==document.readyState?setup():document.addEventListener?document.addEventListener("readystatechange",(function(){"interactive"==document.readyState&&setup()})):document.attachEvent&&document.attachEvent("readystatechange",(function(){"interactive"==document.readyState&&setup()}))}(window,document);